@model OutcomesFirst.ViewModels.SubmissionViewModel

@{
    ViewData["Title"] = "Edit";

     IEnumerable<SelectListItem> archivereasons = new List<SelectListItem> { new SelectListItem { Value = "0", Text = "Select...", Selected = true } }
             .Concat(Model.ArchiveReasons
             .OrderBy(x => x.ArchiveReasonName)
             .Select(t => new SelectListItem
             {
                 Value = t.ArchiveReasonId.ToString(),
                 Text = t.ArchiveReasonName
             })); ;

    IEnumerable<SelectListItem> statuses = new List<SelectListItem> { new SelectListItem { Value = "0", Text = "Select...", Selected = true } }
             .Concat(Model.Statuses
             .OrderBy(x => x.StatusName)
             .Select(t => new SelectListItem
             {
                 Value = t.StatusId.ToString(),
                 Text = t.StatusName
             })); ;

        IEnumerable<SelectListItem> services = new List<SelectListItem> { new SelectListItem { Value = "0", Text = "Select...", Selected = true } }
             .Concat(Model.Services
             .OrderBy(x => x.ServiceName)
             .Select(t => new SelectListItem
             {
                 Value = t.ServiceId.ToString(),
                 Text = t.ServiceName
             })); ;


}

<h3>Submission</h3>

<form asp-action="Edit">

    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="SubmissionId" />
    <input type="hidden" asp-for="SubmissionReferralId" />
    <input type="hidden" asp-for="SubmissionServiceId" />
    <input type="hidden" asp-for="SubmissionService.ServiceName" />
    <input type="hidden" asp-for="SubmissionReferral.ReferralName" />

    <div class="card w-75">
        <div class="card-header" style="background-color:#b9e488">
            <div class="card-title">
                <span style="font-size: 1em; color:#1a75e8;">
                    <i class="fas fa-tools small"></i>
                </span>
                Edit
            </div>
        </div>
        <div class="card-body">
            <div class="form-group">
                <label asp-for="SubmissionReferral.ReferralName" class="control-label col-md-2"></label>
                @Model.SubmissionReferral.ReferralName
            </div>
            <div class="form-group">
                <label asp-for="SubmissionServiceId" class="control-label col-md-2"></label>
                @Model.SubmissionService.ServiceName
            </div>
            <div class="form-group form-inline">
                <label asp-for="SubmissionStatusId" class="control-label col-md-2"></label>
                <select asp-for="SubmissionStatusId" class="form-control" id="PlacementStatus" asp-items="statuses"></select>
                <span asp-validation-for="SubmissionStatusId" class="text-danger"></span>
            </div>
            <div class="form-group form-inline">
                <label asp-for="SubmissionPlacementStartDate" id="PlacementStartTitle" class="control-label col-md-2"></label>
                <input asp-for="SubmissionPlacementStartDate" id="PlacementStartControl" class="form-control" />
                <span asp-validation-for="SubmissionPlacementStartDate" class="text-danger"></span>
            </div>
            <div class="form-group form-inline">
                <label asp-for="SubmissionArchiveReasonId" id="ArchiveReasonTitle" class="control-label col-md-2"></label>
                <select asp-for="SubmissionArchiveReasonId" class="form-control" id="ArchiveReasonControl" asp-items="archivereasons"></select>
                <span asp-validation-for="SubmissionArchiveReasonId" class="text-danger"></span>
            </div>
        </div>
    </div>
    <br />
    <div>
        <input type="submit" value="Save" class="btn btn-success" />
    </div>
    <br />
    <div>
        <a asp-action="Index">Back to List</a>
    </div>
</form>

<script>

    window.onload = function () {

        submissionStatus = @Html.Raw(Json.Serialize(Model.SubmissionStatusId));

        if (submissionStatus == 1)
        {
            $("#PlacementStartTitle").show();
            $("#PlacementStartControl").show();
            $("#ArchiveReasonTitle").hide();
            $("#ArchiveReasonControl").hide();
        }
        else if (submissionStatus == 2)
        {
            $("#PlacementStartTitle").hide();
            $("#PlacementStartControl").hide();
            $("#ArchiveReasonTitle").show();
            $("#ArchiveReasonControl").show();
        }
        else
        {
            $("#PlacementStartTitle").hide();
            $("#PlacementStartControl").hide();
            $("#ArchiveReasonTitle").hide();
            $("#ArchiveReasonControl").hide();
        }


        //if (('#PlacementStatus').value == '1')
        //{
        //    $("#PlacementStartTitle").show();
        //    $("#PlacementStartControl").show();
        //    $("#ArchiveReasonTitle").hide();
        //    $("#ArchiveReasonControl").hide();
        //}

        //if (('#PlacementStatus').value == '2')
        //{
        //    $("#PlacementStartTitle").hide();
        //    $("#PlacementStartControl").hide();
        //    $("#ArchiveReasonTitle").show();
        //    $("#ArchiveReasonControl").show();
        //}

        //if ((('#PlacementStatus').value != '1')  && (('#PlacementStatus').value != '2'))
        //{
        //    $("#PlacementStartTitle").hide();
        //    $("#PlacementStartControl").hide();
        //    $("#ArchiveReasonTitle").hide();
        //    $("#ArchiveReasonControl").hide();
        //}

    };





    $(document).ready(function () {

        $('#PlacementStatus').on('change', function () {

            if (this.value == '1') {
                $("#PlacementStartTitle").show();
                $("#PlacementStartControl").show();
                $("#ArchiveReasonTitle").hide();
                $("#ArchiveReasonControl").hide();
            }

            if (this.value == '2') {
                $("#PlacementStartTitle").hide();
                $("#PlacementStartControl").hide();
                $("#ArchiveReasonTitle").show();
                $("#ArchiveReasonControl").show();
            }

            if ((this.value != '1') && ((this.value != '2'))) {
                $("#PlacementStartTitle").hide();
                $("#PlacementStartControl").hide();
                $("#ArchiveReasonTitle").hide();
                $("#ArchiveReasonControl").hide();
            }
        })
    }
    );



</script>